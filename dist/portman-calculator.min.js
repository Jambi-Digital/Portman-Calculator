!function(){var t=[,function(){!function(t,e,n){"use strict";var a=a||{init:function(t){this.settings(t),this.createChartStructre(),this.setChartMeta(),this.build()},update:function(t){this.settings(t),this.setChartMeta(),this.build()},settings:function(t){this.config={container:t.container?t.container:this.config.container,data:t.data?t.data:this.config.data,label:t.label?this.label:"Monthly payment",offset:t.offset?t.offset:0}},build:function(){for(var t=this.config.container.querySelector(".outer-circle"),e=t.querySelectorAll("[data-wedge-id]"),n=[],a=0;a<e.length;a++)n.push(e[a].dataset.wedgeId);for(var o=0;o<this.config.data.wedges.length;o++){if(-1==n.indexOf(this.config.data.wedges[o].id)){var i=this.createWedge(this.config.data.wedges[o]);t.appendChild(i)}this.setWedge(this.config.data.wedges[o])}},createChartStructre:function(){var t=e.createElement("div"),n=e.createElement("div"),a=e.createElement("span"),o=e.createElement("span");t.className="outer-circle",n.className="inner-circle",a.className="inner-circle-label",o.className="inner-circle-value",this.config.container.appendChild(t),this.config.container.appendChild(n),n.appendChild(a),n.appendChild(o)},setChartMeta:function(){var t=this.config.container.querySelector(".inner-circle-label"),e=this.config.container.querySelector(".inner-circle-value");t.innerHTML=this.config.label,e.innerHTML="£"+this.config.data.total},createWedge:function(t){var n=e.createElement("div"),a=e.createElement("div"),o=e.createElement("div"),i=e.createElement("div"),r=e.createElement("span");return n.setAttribute("data-wedge-id",t.id),n.className="wedge-container",a.className="wedge",o.className="wedge-extension",i.className="wedge-label",r.className="wedge-value",n.appendChild(a),n.appendChild(o),n.appendChild(i),i.appendChild(r),n},setWedge:function(t){var e=this.config.container.querySelector('[data-wedge-id="'+t.id+'"]'),n=e.querySelector(".wedge"),a=e.querySelector(".wedge-extension"),o=e.querySelector(".wedge-label"),i=e.querySelector(".wedge-value"),r=360*t.value/this.config.data.total,c=r/2,l=e.offsetWidth;e.style.transform="rotate("+this.config.offset+"deg)",e.style.webkitTransform="rotate("+this.config.offset+"deg)",e.style.clip=r>180?"auto":"rect(0, "+l+"px, "+l+"px, "+l/2+"px)",n.style.transform="rotate("+r+"deg)",n.style.webkitTransform="rotate("+r+"deg)",n.style.backgroundColor=this.color(t.color,5),n.style.clip="rect(0, "+l/2+"px, "+l+"px, 0)",r>180?(a.style.opacity=1,a.style.transform="rotate(180deg)",a.style.webkitTransform="rotate(180deg)",a.style.backgroundColor=this.color(t.color,5),a.style.clip="rect(0, "+l/2+"px, "+l+"px, 0)"):a.style.opacity=0,o.style.transform="rotate("+c+"deg)",o.style.webkitTransform="rotate("+c+"deg)",o.style.color=this.color(t.color,-30),i.innerHTML=t.value,this.config.offset+=r},color:function(t,e){var n=parseInt(t.slice(1),16),a=Math.round(2.55*e),o=(n>>16)+a,i=(n>>8&255)+a,r=(255&n)+a;return"#"+(16777216+65536*(o<255?o<1?0:o:255)+256*(i<255?i<1?0:i:255)+(r<255?r<1?0:r:255)).toString(16).slice(1)}};t.DonutChart=a}(window,document),"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e})}],e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,n),i.exports}n(1),function(t,e,n){"use strict";var a=a||{init:function(t){this.defaults(),this.settings(t),this.build(),this.events()},getRate:function(t,e,n){return"£10000"},defaults:function(){this.defaults={borrowing_amount:90,submit_url:"https://portmanassetfinance.co.uk",logo_image_url:"https://www.portmanassetfinance.co.uk/calculator/default-logo.svg",accent_colour_one:"#00dcb4",accent_colour_two:"#4747F5"}},settings:function(t){if(!(t.utm_source&&t.utm_medium&&t.utm_campaign))throw"The utm_source, utm_medium, and utm_campaign fields are all required when using the Portman Calculator. Please specify these fields in the object parameter of the init() function";this.config={borrowing_amount:t.borrowing_amount?t.borrowing_amount:this.defaults.borrowing_amount,submit_url:t.submit_url?t.submit_url:this.defaults.submit_url,logo_image_url:t.logo_image_url?t.logo_image_url:this.defaults.logo_image_url,accent_colour_one:t.accent_colour_one?t.accent_colour_one:this.defaults.accent_colour_one,accent_colour_two:t.accent_colour_two?t.accent_colour_two:this.defaults.accent_colour_two,utm_source:t.utm_source?t.utm_source:this.config.utm_source,utm_medium:t.utm_medium?t.utm_medium:this.config.utm_medium,utm_campaign:t.utm_campaign?t.utm_campaign:this.config.utm_campaign}},build:function(n=!1,a=!1,o=!1,i=!1){n=n||"",a=a||this.config.borrowing_amount,o=o||this.config.submit_url;var r,c=this.config.logo_image_url,l=this.config.accent_colour_one,s=this.config.accent_colour_two,u=this.config.utm_source,d=this.config.utm_medium,m=this.config.utm_campaign,p=n*(a/100),g=100-parseInt(a),f=this.formatCurrency(n),h=this.formatCurrency(p);(r=e.getElementById("portman-calculator"))&&r.remove(),(v=e.getElementById("portman-overlay"))&&v.remove(),(r=e.createElement("div")).id="portman-calculator",r.innerHTML='\n            <img src=\'https://portmanassetfinance.co.uk/calculator/close-icon.svg\' id=\'portman-close-icon\'>\n            <div class="title-and-logo">\n                <div class="title">\n                    Finance Calculator\n                </div>\n                <div class="logo">\n                    <img src="'+c+'">\n                </div>\n            </div>\n            <div class="field price">\n                <label for="portman_item_price">1. Item price</label>\n                <input type="text" id=\'portman_item_price\' placeholder=\'£\' min="1000" max="1000000" inputmode="numeric" maxlength="12" value="'+f+'" data-borrowing-amount="'+a+'" inputmode="numeric" maxlength="12">\n            </div>\n            <div class="field price">\n                <label for="portman_borrowing_amount">2. Borrowing amount <span>(based on a '+g+'% deposit)</span></label>\n                <input type="text" id=\'portman_borrowing_amount\' placeholder=\'£\' min="1000" max="1000000" inputmode="numeric" maxlength="12" value="'+h+"\" inputmode=\"numeric\" maxlength=\"12\">\n            </div>\n            <div class=\"field months\">\n                <label>3. For how many months?</label>\n                <div class='portman-month-options'>\n                    <div class='month' data-months='24'>\n                        24\n                        <span>months</span>\n                    </div>\n                    <div class='month' data-months='36'>\n                        36\n                        <span>months</span>\n                    </div>\n                    <div class='month' data-months='48'>\n                        48\n                        <span>months</span>\n                    </div>\n                    <div class='month' data-months='60'>\n                        60\n                        <span>months</span>\n                    </div>\n                    <div class='month active' data-months='72'>\n                        72\n                        <span>months</span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"field credit-profile\">\n                <label>4. Select your credit profile</label>\n                <input type=\"range\" id=\"portman_credit_profile\" name=\"portman_credit_profile\" \n                min=\"3.9\" max=\"14.9\" value=\"3.9\" step=\"0.1\">\n                <div class=\"credit-profile-labels\">  \n                    <span>Exceptional</span>\n                    <span>Good</span>\n                    <span>Average</span>\n                    <span>Below average</span>\n                    <span>Poor</span>\n                </div>\n            </div>\n            <div class='donut-container'>\n                <div id=\"donut-chart\"></div>\n                <div class='key'>\n                    <div class='key-line'>\n                        <div class='circle' style=\"background:"+l+"\"></div>\n                        Borrowing\n                    </div>\n                    <div class='key-line'>\n                        <div class='circle' style=\"background:"+s+'"></div>\n                        Interest\n                    </div>\n                </div>\n            </div>\n            \n            <div class="results">\n                <div class=\'result-row total\'>\n                    <span class=\'label\'>Total payable</span>\n                    <span class=\'amount\' id=\'portman_total_payable\'></span>\n                </div>\n                <div class=\'result-row monthly\'>\n                    <span class=\'label\'>Monthly payment</span>\n                    <span class=\'amount\' id=\'portman_monthly_payment\'></span>\n                </div>\n            </div>\n            <div class=\'tooltip\'>\n                <svg width="74.484" height="74.484" viewBox="29.889 26.973 14.706 14.524" xmlns="http://www.w3.org/2000/svg">\n                <defs>\n                <filter id="Rectangle_160" x="0" y="0" width="74.484" height="74.484" filterUnits="userSpaceOnUse">\n                    <feOffset dy="3" input="SourceAlpha"/>\n                    <feGaussianBlur stdDeviation="10" result="blur"/>\n                    <feFlood flood-opacity="0.161"/>\n                    <feComposite operator="in" in2="blur"/>\n                    <feComposite in="SourceGraphic"/>\n                </filter>\n                </defs>\n                <g id="Group_10996" data-name="Group 10996" transform="translate(-489.5 -5106)">\n                <g id="Group_2244" data-name="Group 2244" transform="translate(519.5 5133)">\n                    <g transform="matrix(1, 0, 0, 1, -30, -27)" filter="url(#Rectangle_160)">\n                    <g id="Rectangle_160-2" data-name="Rectangle 160" transform="translate(30 27)" fill="'+l+'7f" stroke="'+l+'" stroke-width="0.5">\n                        <rect width="14.484" height="14.484" rx="7.242" stroke="none"/>\n                        <rect x="0.25" y="0.25" width="13.984" height="13.984" rx="6.992" fill="none"/>\n                    </g>\n                    </g>\n                </g>\n                <text id="_" data-name="?" transform="translate(523.542 5143.695)" font-size="11" font-weight="700" style="white-space: pre;" fill=\'white\'><tspan x="0" y="0">?</tspan></text>\n                </g>\n            </svg>\n                For illustration purposes only. Our experts will calculate the rate you may be offered based on your individual circumstances. This is not an offer or quote for your finance.\n            </div>\n            <button id=\'portman-submit\' style="background-color:'+l+';" data-submit-url="'+o+'" data-utm-source="'+u+'" data-utm-campaign="'+m+'" data-utm-medium="'+d+'" data-item-name="'+i+"\">Get a Quote</button>\n            <div class='footer'>\n                <div class='top'>\n                    Powered by <img src='https://www.portmanassetfinance.co.uk/calculator/default-logo.svg' alt='Portman'> Personal, professional finance for UK Businesses\n                </div>\n                <div class='bottom'>\n                    Portman Finance Group includes Portman Asset Finance Limited (Reg No: 06226530) who is authorised and regulated by the Financial Conduct Authority for its credit broking activities and who deals with a panel of lenders (FRN: 719988), Portman Leasing Limited (Reg No: 06797365) authorised and regulated by the Financial Conduct for Consumer Hire lending (FRN: 723730) and Portman Commercial Finance Limited (Reg No: 10011121). The companies within Portman Finance Group are all registered in England and Wales with registered office: 1 Pavilion Court, 600 Pavilion Drive, Northampton, NN4 7SL\n                </div>\n            </div>\n        \n            ";var v,_=t.parent.document.body;_||(_=e.body),_.appendChild(r),(v=e.createElement("div")).id="portman-overlay",_.appendChild(v)},events:function(){let n=this;for(var a=e.getElementsByClassName("portman-calculator"),o=0;o<a.length;o++)a[o].addEventListener("click",(function(){var t=this.getAttribute("portman-calculator-item-price"),e=this.getAttribute("portman-calculator-item-name"),a=this.getAttribute("portman-calculator-borrowing-amount"),o=this.getAttribute("portman-calculator-submit-url");n.build(t,a,o,e),n.showCalculator(),n.updateDonut()}),!1);var i=t.parent.document.body;i||(i=e.body),i.addEventListener("click",(function(t){if(t.path)var a=t.path[0];else a=t.target;if(a.classList.contains("month")&&a.parentNode.classList.contains("portman-month-options")){for(var o=e.querySelectorAll("#portman-calculator .portman-month-options .month"),i=0;i<o.length;i++)o[i].classList.remove("active");a.classList.add("active"),n.updateDonut()}"portman-overlay"==a.id&&n.hideCalculator(),"portman-submit"==a.id&&(n.submitForm(a),n.hideCalculator()),"portman-close-icon"==a.id&&n.hideCalculator()})),t.addEventListener("change",(function(t){var a=t.path[0];if("portman_item_price"==a.id){var o=a.getAttribute("data-borrowing-amount"),i=a.value*(o/100);e.getElementById("portman_borrowing_amount").value=n.formatCurrency(Math.floor(i)),n.updateDonut(),a.value=n.formatCurrency(a.value)}"portman_borrowing_amount"==a.id&&(n.updateDonut(),a.value=n.formatCurrency(a.value)),"portman_credit_profile"==a.id&&n.updateDonut()}))},updateDonut:function(){var t=this.unFormatCurrency(e.getElementById("portman_borrowing_amount").value);if(t>0){var n=e.querySelectorAll("#portman-calculator .portman-month-options .month.active")[0].getAttribute("data-months"),a=t*(1+e.getElementById("portman_credit_profile").value/100*(n/12)),o=a/n,i=t/n,r=o-i;i=i.toFixed(2),o=o.toFixed(2),a=a.toFixed(2);var c=e.querySelectorAll("#portman-calculator #donut-chart .inner-circle")[0],l={total:o,wedges:[{id:"a",color:this.config.accent_colour_one,value:i},{id:"b",color:this.config.accent_colour_two,value:r}]},s=Object.create(DonutChart);c?s.update({container:e.getElementById("donut-chart"),data:l}):s.init({container:e.getElementById("donut-chart"),data:l}),e.getElementById("portman_total_payable").innerHTML=this.formatCurrency(a),e.getElementById("portman_monthly_payment").innerHTML=this.formatCurrency(o)}},submitForm:function(n){var a=n.getAttribute("data-submit-url"),o=n.getAttribute("data-utm-source"),i=n.getAttribute("data-utm-medium"),r=n.getAttribute("data-utm-campaign"),c=n.getAttribute("data-item-name"),l=this.unFormatCurrency(e.getElementById("portman_item_price").value);if(a&&o&&i&&r){var s=a+"?utm_source="+o+"&utm_medium="+i+"&utm_campaign="+r+"&amount="+l+"&item_name="+c;t.location=s}},showCalculator:function(){var t=e.getElementById("portman-calculator");t&&t.classList.add("active");var n=e.getElementById("portman-overlay");n&&n.classList.add("active")},hideCalculator:function(){var t=e.getElementById("portman-calculator");t&&t.classList.remove("active");var n=e.getElementById("portman-overlay");n&&n.classList.remove("active")},formatCurrency:function(t){if(t=parseFloat(t)||"0")try{return new Intl.NumberFormat("en-EN",{style:"currency",currency:"GBP"}).format(t)}catch(t){return""}},unFormatCurrency:function(t){if(t){var e=t.toString().replace(/[,£]/g,"");return e?parseFloat(e)||0:""}return""},dump:function(){console.log(this.config.borrowing_amount),console.log(this.config.submit_url),console.log(this.config.logo_image_url),console.log(this.config.accent_colour_one),console.log(this.config.accent_colour_two),console.log(this.config.utm_source),console.log(this.config.utm_medium),console.log(this.config.utm_campaign)}};t.PortmanCalculator=a}(window,document),"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e})}();
//# sourceMappingURL=portman-calculator.min.js.map